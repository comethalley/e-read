<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Books API Example</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Google Books Embedded Viewer API Example</title>




</head>

<body>
    <div id="content">

    </div>

    <div id="viewerCanvas" style="width: 600px; height: 500px"></div>

    <script type="text/javascript" src="https://www.google.com/books/jsapi.js"></script>
    <script>

        const content = document.querySelector('#content')

        fetch('https://www.googleapis.com/books/v1/volumes?q=48lawsofpower')
            .then(response => response.json())
            .then(data => {
                // const coverPage = document.createElement('img')
                // coverPage.src = data.items[0].volumeInfo.imageLinks.thumbnail

                // content.insertAdjacentElement('afterbegin',coverPage)
                const books = data.items
                books.forEach(element => {

                    console.log(element);

                    const coverPage = document.createElement('img')
                    coverPage.src = element.volumeInfo.imageLinks.thumbnail



                    content.insertAdjacentElement('beforeend', coverPage)
                });
            })

        google.books.load();
        function nextStep(viewer) {
            window.setTimeout(function () {
                viewer.nextPage();
                nextStep(viewer);
            }, 3000);
        }

        function alertNotFound() {
            alert("could not embed the book!");
        }
        function initialize() {
            var viewer = new google.books.DefaultViewer(document.getElementById('viewerCanvas'));
            viewer.load('ISBN:0738531367', alertNotFound);
            nextStep(viewer);
        }

        google.books.setOnLoadCallback(initialize);

    </script>
</body>

</html>